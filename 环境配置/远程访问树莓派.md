## 远程访问树莓派

> 当树莓派和你需要连接的设备在同一个局域网下时，通过Xshell可以实现方便的连接；
>
> 然而，当两者出于不同的网段下是，如何才能远程连接？
>
> 此处通过两种方式来实现远程访问树莓派。

### 通过花生壳进行内网穿透

#### 树莓派上配置

* 首先进入花生壳的官网的下载界面：https://hsk.oray.com/download/；

* 找到树莓派的版本，点击下载；

  * 在下载的后方有帮助的选项，里面已经详细的记录了安装的流程，但是和目前最新的版本稍有不同，在官网找了一圈发现并没有入口给你去下载历史版本:-(
  * 目前的版本为：`phddns_3.0.3_systemd.deb`

* 通过`su root`命令进入`root`账户进行操作；

* 找到刚刚下载包的位置，运行如下命令：`dpkg -i phddns_3.0.3_systemd.deb `

  * **安装时必须有网**

* 安装成功后会有一串树莓派的SN码，默认密码已经远程管理地址，如下图所示:

  ![花生壳穿透](https://xycnotes.oss-cn-hangzhou.aliyuncs.com/img/202206251730242.PNG)
  
* 其他：

  * 卸载：`dpkg -r phddns`
  * 在官网的帮助栏中其他的例如启动，停止，重启指令；不知道是软件版本问题还是系统版本问题，无法运行，会提示没有`phddns`这个指令。

#### 本地配置

* 首先进入如下网址，注册一个账号：https://b.oray.com/passport/login?url=https%3A%2F%2Fb.oray.com%2F

  > 关注一大堆的公众号等等的操作，拍自拍照之类的一大堆操作后，会送你1个G的流量和一个免费的域名，临时玩玩的话还算是够用的

* 之后进入**控制台**中，选择**花生壳**，选择**添加设备**，之后刚刚在安装时生成的SN码输入，如下图所示：

  ![添加sn码](https://xycnotes.oss-cn-hangzhou.aliyuncs.com/img/202206251730445.PNG)

* 添加完成后点击刚刚添加的账号进入，选择**内网穿透**，点击添加，如下

  ![添加映射](https://xycnotes.oss-cn-hangzhou.aliyuncs.com/img/202206251730134.PNG)

* 在映射界面的配置如下：

![映射配置](https://xycnotes.oss-cn-hangzhou.aliyuncs.com/img/202206251730980.PNG)

* 配置完成点击诊断，即可出现IP地址与端口的映射信息，如下：

![域名诊断](https://xycnotes.oss-cn-hangzhou.aliyuncs.com/img/202206251731051.PNG)

* 然后将这些信息填入`Xshell`中即可进行远程操控了:-)

***

### 通过teamviewer远程操控

**闲扯**：首先，先夸一波teamviewer这个软件，实在是太好用了！各种平台都支持，比上述的内网穿透啥的配置起来简单多的多的了；一个软件就将你的电脑挂在云端；感觉往后的笔电都不需要看啥配置了，只要能连网，直接连一个云主机啥都可以做:-)

**正题**：

* 进入如下网址：https://www.teamviewer.com/en/download/linux/
* 在网站中找到树莓派的下载链接，点击下载：

![树莓派teamviewer下载](https://xycnotes.oss-cn-hangzhou.aliyuncs.com/img/202206251731559.PNG)

* 将安装包放置树莓派中，**双击**安装根据相应的提示安装即可；
* 打开软件界面，点击软件中的小齿轮中的`security`将密码给固定起来；
* 设置完成会会有其ID号显示；
* 此时就可以通过其他设备开启的teamviewer软件输入ID号和密码来访问树莓派的界面了，就是如此简单，如此方便:-)

> 也可以把设备添加到你个账户中，更加的方便
>
> 当你想添加账号是，账号一直显示未激活，需要你通过邮箱激活，通过邮箱激活链接跳转后又是让你激活，存在一个死循环，目前还不知道如何解决。

***

### 参考

http://service.oray.com/question/2680.html

https://blog.csdn.net/niaonao/article/details/91411044

https://blog.csdn.net/zdx1996/article/details/88845077

https://www.cnblogs.com/trilobita/p/10506094.html